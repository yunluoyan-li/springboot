<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>分类管理样式测试</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .test-container {
            padding: 20px;
            background: #f8f9fa;
            min-height: 100vh;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .load-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
        }
        .load-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .content-area {
            border: 2px dashed #dee2e6;
            min-height: 200px;
            padding: 20px;
            margin-top: 15px;
            border-radius: 8px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="text-center mb-4">
            <i class="fas fa-tags"></i> 分类管理样式测试
        </h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="test-section">
                    <h3 class="test-title">
                        <i class="fas fa-list"></i> 分类列表页面测试
                    </h3>
                    <button class="load-btn" onclick="loadCategoryList()">
                        <i class="fas fa-download"></i> 加载分类列表
                    </button>
                    <div id="category-list-area" class="content-area">
                        <p class="text-muted text-center">点击按钮加载分类列表页面</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="test-section">
                    <h3 class="test-title">
                        <i class="fas fa-plus"></i> 添加分类页面测试
                    </h3>
                    <button class="load-btn" onclick="loadCategoryAdd()">
                        <i class="fas fa-download"></i> 加载添加分类
                    </button>
                    <div id="category-add-area" class="content-area">
                        <p class="text-muted text-center">点击按钮加载添加分类页面</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="test-section">
                    <h3 class="test-title">
                        <i class="fas fa-chart-bar"></i> 分类统计页面测试
                    </h3>
                    <button class="load-btn" onclick="loadCategoryStats()">
                        <i class="fas fa-download"></i> 加载分类统计
                    </button>
                    <div id="category-stats-area" class="content-area">
                        <p class="text-muted text-center">点击按钮加载分类统计页面</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="test-section">
                    <h3 class="test-title">
                        <i class="fas fa-check-circle"></i> 样式检查结果
                    </h3>
                    <div id="style-check-result">
                        <p class="text-muted">点击上方按钮测试后查看结果</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function loadCategoryList() {
            const area = document.getElementById('category-list-area');
            area.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div><p class="mt-2">加载中...</p></div>';
            
            fetch('/categories/list', {
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.text())
            .then(html => {
                area.innerHTML = html;
                checkStyles(area, '分类列表');
            })
            .catch(error => {
                area.innerHTML = '<div class="alert alert-danger">加载失败: ' + error.message + '</div>';
            });
        }
        
        function loadCategoryAdd() {
            const area = document.getElementById('category-add-area');
            area.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div><p class="mt-2">加载中...</p></div>';
            
            fetch('/categories/add', {
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.text())
            .then(html => {
                area.innerHTML = html;
                checkStyles(area, '添加分类');
            })
            .catch(error => {
                area.innerHTML = '<div class="alert alert-danger">加载失败: ' + error.message + '</div>';
            });
        }
        
        function loadCategoryStats() {
            const area = document.getElementById('category-stats-area');
            area.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div><p class="mt-2">加载中...</p></div>';
            
            fetch('/categories/stats', {
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.text())
            .then(html => {
                area.innerHTML = html;
                checkStyles(area, '分类统计');
            })
            .catch(error => {
                area.innerHTML = '<div class="alert alert-danger">加载失败: ' + error.message + '</div>';
            });
        }
        
        function checkStyles(container, pageName) {
            const resultDiv = document.getElementById('style-check-result');
            const checks = [];
            
            // 检查渐变背景
            const hasGradient = container.querySelector('.category-management') || 
                               container.querySelector('[style*="gradient"]');
            checks.push({
                name: '渐变背景',
                passed: !!hasGradient,
                message: hasGradient ? '✓ 渐变背景正常' : '✗ 渐变背景缺失'
            });
            
            // 检查Font Awesome图标
            const hasIcons = container.querySelector('.fas, .fa');
            checks.push({
                name: 'Font Awesome图标',
                passed: !!hasIcons,
                message: hasIcons ? '✓ 图标正常显示' : '✗ 图标未显示'
            });
            
            // 检查卡片样式
            const hasCards = container.querySelector('.content-card, .stat-card');
            checks.push({
                name: '卡片样式',
                passed: !!hasCards,
                message: hasCards ? '✓ 卡片样式正常' : '✗ 卡片样式缺失'
            });
            
            // 检查按钮样式
            const hasButtons = container.querySelector('.add-category-btn, .btn');
            checks.push({
                name: '按钮样式',
                passed: !!hasButtons,
                message: hasButtons ? '✓ 按钮样式正常' : '✗ 按钮样式缺失'
            });
            
            // 生成结果报告
            const passedCount = checks.filter(c => c.passed).length;
            const totalCount = checks.length;
            
            let resultHTML = `<h5>${pageName} 样式检查结果</h5>`;
            resultHTML += `<div class="status ${passedCount === totalCount ? 'success' : 'error'}">`;
            resultHTML += `通过 ${passedCount}/${totalCount} 项检查`;
            resultHTML += '</div><ul class="mt-2">';
            
            checks.forEach(check => {
                const icon = check.passed ? '✅' : '❌';
                resultHTML += `<li>${icon} ${check.message}</li>`;
            });
            
            resultHTML += '</ul>';
            resultDiv.innerHTML = resultHTML;
        }
    </script>
</body>
</html> 