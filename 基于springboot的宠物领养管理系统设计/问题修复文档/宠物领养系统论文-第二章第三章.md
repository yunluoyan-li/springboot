# 宠物领养系统论文 - 第二章和第三章

## 第二章 需求分析

### 2.1 系统总体需求分析

宠物领养系统是一个基于Web的综合性平台，旨在为流浪动物和需要领养的家庭搭建桥梁。系统需要实现从数据采集、数据处理、数据存储到数据展示的完整流程，为用户提供便捷的宠物领养服务。

#### 2.1.1 系统目标
- 建立完善的宠物信息数据库，包含宠物基本信息、健康状况、领养状态等
- 提供用户注册、登录、宠物浏览、申请领养等核心功能
- 实现管理员后台管理功能，包括宠物管理、用户管理、申请审核等
- 集成数据分析功能，为管理决策提供数据支持
- 提供数据可视化展示，直观呈现系统运营状况

#### 2.1.2 系统范围
- 宠物信息管理：包括宠物基本信息、图片、健康状况等
- 用户管理：用户注册、登录、权限管理等
- 领养申请管理：申请提交、审核、状态跟踪等
- 数据分析：统计报表、趋势分析、可视化展示等
- 系统管理：后台管理、数据维护等

### 2.2 系统功能需求分析

#### 2.2.1 系统功能结构图

```
宠物领养系统
├── 数据采集模块
│   ├── 网络爬虫功能
│   ├── 数据转存功能
│   └── 数据清洗功能
├── 数据存储模块
│   ├── 数据保存功能
│   ├── 数据库管理
│   └── 数据备份
├── 用户管理模块
│   ├── 用户注册
│   ├── 用户登录
│   ├── 用户信息管理
│   └── 权限管理
├── 宠物管理模块
│   ├── 宠物信息管理
│   ├── 宠物分类管理
│   ├── 宠物品种管理
│   └── 宠物图片管理
├── 领养申请模块
│   ├── 申请提交
│   ├── 申请审核
│   ├── 状态跟踪
│   └── 申请历史
├── 数据分析模块
│   ├── 基础统计分析
│   ├── 趋势分析
│   ├── 用户行为分析
│   └── 领养成功率分析
├── 数据可视化模块
│   ├── 统计图表
│   ├── 仪表板
│   ├── 报表生成
│   └── 实时监控
└── 系统管理模块
    ├── 系统配置
    ├── 日志管理
    ├── 数据维护
    └── 安全管理
```

#### 2.2.2 参与者词汇表

| 参与者 | 描述 |
|--------|------|
| 系统管理员 | 拥有最高权限的用户，负责系统整体管理和维护 |
| 普通用户 | 注册用户，可以浏览宠物信息、提交领养申请 |
| 宠物管理员 | 负责宠物信息的录入、更新和管理 |
| 申请审核员 | 负责审核领养申请，决定是否批准 |
| 数据分析师 | 负责数据分析和报表生成 |

#### 2.2.3 用例图

```
[系统管理员] --> [用户管理]
[系统管理员] --> [系统配置]
[系统管理员] --> [数据分析]

[普通用户] --> [用户注册]
[普通用户] --> [用户登录]
[普通用户] --> [浏览宠物]
[普通用户] --> [提交申请]

[宠物管理员] --> [宠物信息管理]
[宠物管理员] --> [宠物分类管理]
[宠物管理员] --> [宠物图片管理]

[申请审核员] --> [申请审核]
[申请审核员] --> [状态更新]

[数据分析师] --> [数据统计]
[数据分析师] --> [报表生成]
```

#### 2.2.4 用例词汇表

| 用例名称 | 描述 | 参与者 | 前置条件 | 后置条件 |
|----------|------|--------|----------|----------|
| 用户注册 | 新用户注册账号 | 普通用户 | 无 | 用户账号创建成功 |
| 用户登录 | 用户登录系统 | 所有用户 | 用户已注册 | 用户成功登录 |
| 浏览宠物 | 查看宠物列表和详情 | 普通用户 | 用户已登录 | 显示宠物信息 |
| 提交申请 | 提交领养申请 | 普通用户 | 用户已登录，宠物可领养 | 申请提交成功 |
| 申请审核 | 审核领养申请 | 申请审核员 | 存在待审核申请 | 申请状态更新 |
| 宠物管理 | 管理宠物信息 | 宠物管理员 | 管理员已登录 | 宠物信息更新 |
| 数据分析 | 生成统计报表 | 数据分析师 | 系统有数据 | 报表生成完成 |

#### 2.2.5 系统管理模块用例描述

**用例名称：用户管理**
- **主要参与者：** 系统管理员
- **前置条件：** 管理员已登录系统
- **基本流程：**
  1. 管理员进入用户管理页面
  2. 系统显示用户列表
  3. 管理员可以查看、编辑、删除用户信息
  4. 管理员可以修改用户权限
  5. 系统保存修改结果
- **异常流程：**
  - 如果用户正在使用系统，无法删除
  - 如果权限不足，操作被拒绝

**用例名称：宠物信息管理**
- **主要参与者：** 宠物管理员
- **前置条件：** 管理员已登录系统
- **基本流程：**
  1. 管理员进入宠物管理页面
  2. 系统显示宠物列表
  3. 管理员可以添加、编辑、删除宠物信息
  4. 管理员可以上传宠物图片
  5. 系统保存修改结果
- **异常流程：**
  - 如果宠物已有申请，无法删除
  - 如果图片格式不正确，上传失败

#### 2.2.6 数据分析功能

数据分析模块采用多种统计模型和算法，为系统运营提供数据支持：

**基础统计模型：**
- 描述性统计：计算均值、方差、分布等基础统计量
- 频次分析：统计各类数据的出现频次
- 比例分析：计算各类数据的占比情况

**趋势分析模型：**
- 时间序列分析：分析数据随时间的变化趋势
- 季节性分析：识别数据的季节性模式
- 预测模型：基于历史数据预测未来趋势

**关联分析模型：**
- 相关性分析：分析不同变量之间的相关性
- 聚类分析：将相似的数据分组
- 分类分析：根据特征对数据进行分类

**用户行为分析模型：**
- 用户画像分析：构建用户特征画像
- 行为路径分析：分析用户操作路径
- 转化率分析：分析用户行为转化情况

#### 2.2.7 数据可视化功能

数据可视化模块采用多种图表类型，直观展示数据分析结果：

**图表类型：**
- 饼图：展示分类数据的占比情况
- 柱状图：展示分类数据的数量对比
- 折线图：展示数据的时间趋势
- 散点图：展示两个变量之间的关系
- 热力图：展示数据的密度分布

**仪表板功能：**
- 实时数据展示：显示系统当前状态
- 关键指标监控：监控重要业务指标
- 异常预警：及时发现数据异常
- 交互式操作：支持用户交互操作

### 2.3 系统非功能需求分析

#### 2.3.1 性能需求
- 系统响应时间：页面加载时间不超过3秒
- 并发用户数：支持100个用户同时在线
- 数据处理能力：支持每日1000条数据更新
- 系统可用性：99.5%的系统可用时间

#### 2.3.2 安全需求
- 用户认证：采用安全的密码加密机制
- 权限控制：基于角色的访问控制
- 数据保护：敏感数据加密存储
- 日志记录：记录所有重要操作日志

#### 2.3.3 可靠性需求
- 数据备份：定期自动备份重要数据
- 故障恢复：系统故障后能够快速恢复
- 错误处理：完善的错误处理机制
- 数据一致性：保证数据的一致性和完整性

#### 2.3.4 可维护性需求
- 模块化设计：系统采用模块化架构
- 代码规范：遵循统一的代码规范
- 文档完善：提供详细的技术文档
- 版本控制：使用版本控制系统管理代码

### 2.4 本章小结

本章详细分析了宠物领养系统的需求，包括功能需求和非功能需求。通过系统功能结构图、用例图等方式，明确了系统的功能范围和用户交互流程。同时，详细描述了数据分析功能的技术原理和数据可视化功能的实现方式。这些需求分析为后续的系统设计提供了重要的指导依据。

---

## 第三章 系统概要设计

### 3.1 系统总体设计

#### 3.1.1 系统架构

宠物领养系统采用分层架构设计，主要分为以下几层：

**表现层（Presentation Layer）：**
- 负责用户界面的展示和用户交互
- 采用Thymeleaf模板引擎实现动态页面
- 使用Bootstrap框架提供响应式设计
- 集成Chart.js实现数据可视化

**业务逻辑层（Business Logic Layer）：**
- 实现系统的核心业务逻辑
- 包含用户管理、宠物管理、申请管理等服务
- 提供数据验证和业务规则处理
- 实现事务管理和异常处理

**数据访问层（Data Access Layer）：**
- 负责与数据库的交互
- 使用MyBatis框架实现ORM映射
- 提供数据持久化服务
- 实现数据查询和更新操作

**数据层（Data Layer）：**
- MySQL数据库存储系统数据
- 实现数据的持久化存储
- 提供数据备份和恢复功能

#### 3.1.2 功能架构

```
┌─────────────────────────────────────────────────────────────┐
│                        表现层                                │
├─────────────────────────────────────────────────────────────┤
│  用户界面  │  管理界面  │  数据分析界面  │  移动端适配        │
├─────────────────────────────────────────────────────────────┤
│                        业务逻辑层                            │
├─────────────────────────────────────────────────────────────┤
│ 用户服务 │ 宠物服务 │ 申请服务 │ 分析服务 │ 爬虫服务 │ 安全服务 │
├─────────────────────────────────────────────────────────────┤
│                        数据访问层                            │
├─────────────────────────────────────────────────────────────┤
│ 用户DAO │ 宠物DAO │ 申请DAO │ 品种DAO │ 图片DAO │ 统计DAO │
├─────────────────────────────────────────────────────────────┤
│                        数据层                                │
├─────────────────────────────────────────────────────────────┤
│  MySQL数据库  │  文件存储  │  缓存系统  │  日志系统          │
└─────────────────────────────────────────────────────────────┘
```

#### 3.1.3 技术架构

**开发技术栈：**
- 后端框架：Spring Boot 2.7.0
- 数据库：MySQL 8.0
- ORM框架：MyBatis 3.5
- 模板引擎：Thymeleaf 3.0
- 前端框架：Bootstrap 5.3.0
- 图表库：Chart.js 3.9
- 爬虫技术：Jsoup 1.15
- 安全框架：Spring Security

**部署架构：**
- 应用服务器：Tomcat 9.0
- 数据库服务器：MySQL 8.0
- 文件服务器：本地存储
- 缓存服务器：Redis（可选）
- 负载均衡：Nginx（可选）

### 3.2 系统类图设计

#### 3.2.1 初步类图设计

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    User     │    │     Pet     │    │Application  │
├─────────────┤    ├─────────────┤    ├─────────────┤
│ -userId     │    │ -petId      │    │ -appId      │
│ -username   │    │ -name       │    │ -userId     │
│ -password   │    │ -breedId    │    │ -petId      │
│ -email      │    │ -age        │    │ -status     │
│ -role       │    │ -gender     │    │ -reason     │
│ -status     │    │ -status     │    │ -date       │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                   ┌─────────────┐
                   │ PetBreed    │
                   ├─────────────┤
                   │ -breedId    │
                   │ -name       │
                   │ -categoryId │
                   │ -origin     │
                   └─────────────┘
```

#### 3.2.2 时序图设计

**用户注册时序图：**
```
用户    │  控制器   │  服务层   │  DAO层   │  数据库
  │        │          │          │          │
  │──注册──→│          │          │          │
  │        │──验证──→│          │          │
  │        │          │──检查──→│          │
  │        │          │          │──查询──→│
  │        │          │          │←──结果──│
  │        │          │←──存在──│          │
  │        │←──错误──│          │          │
  │←──失败──│          │          │          │
```

**宠物信息管理时序图：**
```
管理员  │  控制器   │  服务层   │  DAO层   │  数据库
  │        │          │          │          │
  │──添加──→│          │          │          │
  │        │──验证──→│          │          │
  │        │          │──保存──→│          │
  │        │          │          │──插入──→│
  │        │          │          │←──成功──│
  │        │          │←──成功──│          │
  │        │←──成功──│          │          │
  │←──成功──│          │          │          │
```

#### 3.2.3 详细类图设计

```
┌─────────────────────────────────────────────────────────────┐
│                        实体类                                │
├─────────────────────────────────────────────────────────────┤
│  User  │  Pet  │  PetBreed  │  PetCategory  │  Application  │
├─────────────────────────────────────────────────────────────┤
│                        服务类                                │
├─────────────────────────────────────────────────────────────┤
│UserService│PetService│BreedService│AppService│AnalyticsService│
├─────────────────────────────────────────────────────────────┤
│                        控制器类                              │
├─────────────────────────────────────────────────────────────┤
│UserController│PetController│AppController│AnalyticsController│
├─────────────────────────────────────────────────────────────┤
│                        DAO类                                │
├─────────────────────────────────────────────────────────────┤
│  UserDao  │  PetDao  │  BreedDao  │  AppDao  │  AnalyticsDao │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 系统数据库设计

#### 3.3.1 数据库实体模型设计

**ER图：**
```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   users     │    │    pets     │    │applications │
│             │    │             │    │             │
│ user_id (PK)│    │ pet_id (PK) │    │app_id (PK)  │
│ username    │    │ name        │    │user_id (FK) │
│ password    │    │ breed_id(FK)│    │pet_id (FK)  │
│ email       │    │ age         │    │status       │
│ role        │    │ gender      │    │reason       │
│ status      │    │ status      │    │date         │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                   ┌─────────────┐
                   │ pet_breeds  │
                   │             │
                   │breed_id (PK)│
                   │name         │
                   │category_id  │
                   │origin       │
                   └─────────────┘
```

**实体属性图：**

**用户实体（User）：**
- 属性：用户ID、用户名、密码、邮箱、电话、地址、角色、状态、创建时间、更新时间
- 主键：用户ID
- 唯一约束：用户名、邮箱

**宠物实体（Pet）：**
- 属性：宠物ID、品种ID、名称、年龄、性别、颜色、体型、健康状况、状态、描述、故事、创建时间、更新时间
- 主键：宠物ID
- 外键：品种ID（关联宠物品种表）

**宠物品种实体（PetBreed）：**
- 属性：品种ID、分类ID、品种名称、原产地、寿命、性格特点、护理难度、描述、创建时间、搜索关键词
- 主键：品种ID
- 外键：分类ID（关联宠物分类表）

**领养申请实体（AdoptionApplication）：**
- 属性：申请ID、用户ID、宠物ID、申请文本、家庭描述、经验、状态、管理员备注、响应日期、创建时间
- 主键：申请ID
- 外键：用户ID（关联用户表）、宠物ID（关联宠物表）

#### 3.3.2 数据库设计

**表3-1 用户表（users）**

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| user_id | INT | - | NOT NULL | AUTO_INCREMENT | 用户ID，主键 |
| username | VARCHAR | 50 | NOT NULL | - | 用户名，唯一 |
| password | VARCHAR | 255 | NOT NULL | - | 密码，加密存储 |
| email | VARCHAR | 100 | NOT NULL | - | 邮箱，唯一 |
| phone | VARCHAR | 20 | NULL | - | 电话号码 |
| address | TEXT | - | NULL | - | 地址 |
| role | ENUM | - | NOT NULL | 'USER' | 用户角色 |
| status | ENUM | - | NOT NULL | 'ACTIVE' | 用户状态 |
| created_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**表3-2 宠物表（pets）**

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| pet_id | INT | - | NOT NULL | AUTO_INCREMENT | 宠物ID，主键 |
| breed_id | INT | - | NULL | - | 品种ID，外键 |
| name | VARCHAR | 100 | NOT NULL | - | 宠物名称 |
| age | INT | - | NULL | - | 年龄（月） |
| gender | ENUM | - | NULL | - | 性别 |
| color | VARCHAR | 50 | NULL | - | 颜色 |
| size | ENUM | - | NULL | - | 体型 |
| health_status | ENUM | - | NOT NULL | 'GOOD' | 健康状况 |
| status | ENUM | - | NOT NULL | 'AVAILABLE' | 状态 |
| description | TEXT | - | NULL | - | 描述 |
| story | TEXT | - | NULL | - | 背景故事 |
| created_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**表3-3 宠物品种表（pet_breeds）**

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| breed_id | INT | - | NOT NULL | AUTO_INCREMENT | 品种ID，主键 |
| category_id | INT | - | NOT NULL | - | 分类ID，外键 |
| breed_name | VARCHAR | 100 | NOT NULL | - | 品种名称 |
| origin | VARCHAR | 100 | NULL | - | 原产地 |
| life_span | VARCHAR | 50 | NULL | - | 寿命 |
| temperament | VARCHAR | 200 | NULL | - | 性格特点 |
| care_level | ENUM | - | NOT NULL | 'MEDIUM' | 护理难度 |
| description | TEXT | - | NULL | - | 品种描述 |
| created_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| search_keywords | TEXT | - | NULL | - | 搜索关键词 |

**表3-4 领养申请表（adoption_applications）**

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| application_id | INT | - | NOT NULL | AUTO_INCREMENT | 申请ID，主键 |
| user_id | INT | - | NOT NULL | - | 用户ID，外键 |
| pet_id | INT | - | NOT NULL | - | 宠物ID，外键 |
| application_text | TEXT | - | NULL | - | 申请文本 |
| home_description | TEXT | - | NULL | - | 家庭描述 |
| experience | TEXT | - | NULL | - | 经验 |
| status | ENUM | - | NOT NULL | 'PENDING' | 申请状态 |
| admin_notes | TEXT | - | NULL | - | 管理员备注 |
| response_date | TIMESTAMP | - | NULL | - | 响应日期 |
| created_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |

**表3-5 宠物图片表（pet_images）**

| 字段名 | 数据类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| image_id | INT | - | NOT NULL | AUTO_INCREMENT | 图片ID，主键 |
| pet_id | INT | - | NOT NULL | - | 宠物ID，外键 |
| image_url | VARCHAR | 500 | NOT NULL | - | 图片URL |
| is_primary | BOOLEAN | - | NOT NULL | FALSE | 是否主图 |
| display_order | INT | - | NOT NULL | 0 | 显示顺序 |
| created_at | TIMESTAMP | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |

### 3.4 本章小结

本章完成了宠物领养系统的概要设计，包括系统架构设计、类图设计和数据库设计。系统采用分层架构，确保各层之间的松耦合和高内聚。通过详细的类图设计，明确了系统的实体关系和数据流向。数据库设计遵循第三范式，确保数据的完整性和一致性。这些设计为后续的系统实现提供了重要的技术指导。 