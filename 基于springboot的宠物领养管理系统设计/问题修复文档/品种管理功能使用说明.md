# 品种管理功能使用说明

## 功能概述

品种管理模块是宠物领养系统的重要组成部分，用于管理各种宠物品种的信息。该模块提供了完整的CRUD操作，包括品种的添加、编辑、删除、查看和统计功能。

## 功能特性

### 1. 品种列表管理
- **卡片式展示**: 美观的品种信息卡片
- **统计信息**: 显示总品种数和各护理难度等级的数量
- **操作按钮**: 查看详情、编辑、删除功能
- **响应式设计**: 适配不同屏幕尺寸

### 2. 品种信息管理
- **基本信息**: 品种名称、所属分类
- **详细信息**: 原产地、平均寿命、性格特点、护理难度
- **描述信息**: 详细的品种描述和搜索关键词
- **分类关联**: 与宠物分类的关联管理

### 3. 统计功能
- **护理难度分布**: 饼图显示各难度等级的品种分布
- **分类统计**: 柱状图显示各分类的品种数量
- **详细统计表**: 完整的品种信息统计表格

## 技术实现

### 1. 后端架构

#### Controller层
```java
@Controller
@RequestMapping("/breeds")
public class BreedController {
    @GetMapping("/list")           // 品种列表页面
    @GetMapping("/add")            // 添加品种页面
    @PostMapping("/add")           // 处理添加品种
    @GetMapping("/edit/{id}")      // 编辑品种页面
    @PostMapping("/edit/{id}")     // 处理编辑品种
    @GetMapping("/delete/{id}")    // 删除品种
    @GetMapping("/detail/{id}")    // 品种详情页面
    @GetMapping("/stats")          // 品种统计页面
}
```

#### Service层
```java
public interface PetBreedService {
    List<PetBreed> getAllPetBreeds();           // 获取所有品种
    PetBreed getPetBreedById(Integer breedId);  // 根据ID获取品种
    int insertPetBreed(PetBreed petBreed);      // 插入品种
    int updatePetBreed(PetBreed petBreed);      // 更新品种
    int deletePetBreed(Integer breedId);        // 删除品种
}
```

#### Mapper层
```java
public interface PetBreedDao {
    List<PetBreed> findAll();                    // 查询所有品种
    PetBreed findById(Integer breedId);         // 根据ID查询
    int insert(PetBreed petBreed);              // 插入品种
    int update(PetBreed petBreed);              // 更新品种
    int delete(Integer breedId);                 // 删除品种
    List<Map<String, Object>> getTopPetBreeds(int limit); // 获取热门品种
}
```

### 2. 前端实现

#### 品种列表页面
- **卡片式布局**: 美观的品种展示
- **统计卡片**: 显示品种统计信息
- **操作按钮**: 查看、编辑、删除功能
- **响应式设计**: 适配不同屏幕尺寸

#### 添加/编辑表单
- **分步表单**: 基本信息和详细信息分离
- **分类选择**: 下拉选择所属分类
- **护理难度**: 低、中、高三个等级选择
- **帮助提示**: 提供输入指导

#### 统计页面
- **Chart.js图表**: 可视化品种分布
- **进度条**: 显示品种占比
- **详细统计表**: 品种详细信息

## 数据库设计

### 品种表结构
```sql
CREATE TABLE pet_breeds (
    breed_id INT PRIMARY KEY AUTO_INCREMENT,
    category_id INT NOT NULL COMMENT '所属分类ID',
    breed_name VARCHAR(100) NOT NULL COMMENT '品种名称',
    origin VARCHAR(100) COMMENT '原产地',
    life_span VARCHAR(50) COMMENT '平均寿命',
    temperament TEXT COMMENT '性格特点',
    care_level ENUM('LOW', 'MEDIUM', 'HIGH') COMMENT '护理难度',
    description TEXT COMMENT '品种描述',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    search_keywords TEXT COMMENT '搜索关键词',
    FOREIGN KEY (category_id) REFERENCES pet_categories(category_id) ON DELETE CASCADE
);
```

### 索引设计
```sql
-- 主键索引
PRIMARY KEY (breed_id)

-- 外键索引
FOREIGN KEY (category_id) REFERENCES pet_categories(category_id)

-- 普通索引
INDEX idx_category_id (category_id)
INDEX idx_breed_name (breed_name)
INDEX idx_care_level (care_level)
```

## 使用示例

### 1. 访问品种列表
```
GET /breeds/list
```

### 2. 添加新品种
```
GET /breeds/add
POST /breeds/add
```

### 3. 编辑品种
```
GET /breeds/edit/{id}
POST /breeds/edit/{id}
```

### 4. 查看品种详情
```
GET /breeds/detail/{id}
```

### 5. 删除品种
```
GET /breeds/delete/{id}
```

### 6. 查看品种统计
```
GET /breeds/stats
```

## 数据验证

### 1. 必填字段验证
- **品种名称**: 不能为空
- **所属分类**: 必须选择有效的分类

### 2. 数据格式验证
- **品种名称**: 长度限制100字符
- **原产地**: 长度限制100字符
- **平均寿命**: 长度限制50字符
- **护理难度**: 只能是LOW、MEDIUM、HIGH之一

### 3. 业务逻辑验证
- **分类关联**: 确保选择的分类存在
- **数据完整性**: 删除品种时检查是否有关联的宠物

## 与分类管理的关系

### 1. 数据关联
- 品种通过`category_id`字段关联到分类
- 一个分类可以包含多个品种
- 删除分类时会级联删除相关品种

### 2. 功能集成
- 添加/编辑品种时必须选择所属分类
- 品种列表显示所属分类信息
- 品种统计按分类进行分组

### 3. 用户体验
- 分类和品种管理形成完整的数据管理体系
- 用户可以通过分类快速找到相关品种
- 统计功能提供分类维度的数据分析

## 扩展功能

### 1. 搜索功能
- 按品种名称搜索
- 按分类筛选
- 按护理难度筛选
- 关键词搜索

### 2. 批量操作
- 批量删除品种
- 批量修改分类
- 批量导入品种数据

### 3. 高级统计
- 品种受欢迎程度分析
- 护理难度分布趋势
- 品种添加时间统计

## 注意事项

### 1. 数据安全
- 删除品种前检查关联数据
- 提供数据备份和恢复功能
- 记录操作日志

### 2. 性能优化
- 使用分页显示大量数据
- 优化数据库查询
- 缓存常用数据

### 3. 用户体验
- 提供友好的错误提示
- 支持键盘快捷键操作
- 响应式设计适配移动设备

## 总结

品种管理模块为宠物领养系统提供了完整的数据管理功能，与分类管理模块形成完整的数据管理体系。通过直观的界面和丰富的功能，用户可以轻松管理各种宠物品种信息，为宠物领养提供准确的数据支持。 