# 🔐 登录功能使用说明

## 问题解决

你遇到的404错误是因为访问了传统的Thymeleaf模板页面，该页面使用表单提交到 `/users/login`。现在已经恢复了原来的登录方法，问题应该解决了。

## 登录方式

### 1. 传统页面登录（推荐）

访问：`http://localhost:8080/users/login`

这是传统的登录页面，使用表单提交方式：
- 用户名：`admin` 或 `123456`
- 密码：`123456`

### 2. API登录测试

访问以下任一测试页面：
- `http://localhost:8080/test_login_simple.html`
- `http://localhost:8080/simple_login_test.html`
- `http://localhost:8080/status_check.html`

这些页面使用API调用方式，适合测试和调试。

### 3. 前端SPA登录

访问：`http://localhost:8080/frontend/index.html`

这是现代化的单页应用，使用API调用方式。

## 测试用户

根据数据库日志，系统中有以下用户：

### 管理员用户
- **用户名**: `admin`
- **密码**: `admin`
- **角色**: `USER` (但ID为1，可能是管理员)

### 普通用户
- **用户名**: `123456`
- **密码**: `123456`
- **角色**: `ADMIN`

### 其他用户
- `daddawd1` / `123456`
- `1234566` / `123456`
- `1234561` / `1234561`
- `12345611111` / `123456`
- `1234523111232123` / (空密码)
- `1234561111` / `123456`

## 登录流程

### 传统页面登录流程
1. 访问 `http://localhost:8080/users/login`
2. 输入用户名和密码
3. 点击"登录"按钮
4. 如果成功，跳转到主页面
5. 如果失败，显示错误信息

### API登录流程
1. 访问测试页面
2. 输入用户名和密码
3. 点击"测试登录"按钮
4. 查看详细的响应信息

## 故障排除

### 1. 404错误
**原因**: 访问了不存在的路径
**解决**: 确保访问正确的登录页面

### 2. 用户名或密码错误
**原因**: 输入的用户名或密码不正确
**解决**: 使用正确的测试用户

### 3. 数据库连接问题
**原因**: 数据库服务未启动或连接配置错误
**解决**: 检查数据库服务状态

### 4. 应用程序未启动
**原因**: Spring Boot应用未启动
**解决**: 运行 `start.bat` 启动应用

## 验证步骤

1. **启动应用**：
   ```cmd
   start.bat
   ```

2. **访问登录页面**：
   ```
   http://localhost:8080/users/login
   ```

3. **使用测试用户登录**：
   - 用户名：`admin`
   - 密码：`admin`

4. **验证登录成功**：
   - 应该跳转到主页面
   - 或者显示欢迎信息

## 调试工具

### 1. 状态检查页面
访问 `http://localhost:8080/status_check.html` 进行全面检查

### 2. 简单登录测试
访问 `http://localhost:8080/test_login_simple.html` 进行API测试

### 3. 浏览器开发者工具
- 打开F12
- 查看Network标签页
- 检查请求和响应

## 注意事项

1. **密码加密**: 数据库中的密码是MD5加密的
2. **Session管理**: 登录成功后会在session中存储用户信息
3. **权限控制**: 不同角色有不同的访问权限
4. **浏览器缓存**: 如果修改了代码，可能需要清除浏览器缓存

## 常见问题

### Q: 为什么登录后还是显示未登录？
A: 检查session是否正确设置，可能需要清除浏览器缓存。

### Q: 为什么API测试成功但页面登录失败？
A: 可能是session管理问题，检查session配置。

### Q: 如何添加新用户？
A: 可以通过注册页面或直接在数据库中插入用户记录。

## 联系支持

如果仍然遇到问题，请提供：
1. 具体的错误信息
2. 访问的页面URL
3. 使用的用户名和密码
4. 浏览器控制台的错误信息 